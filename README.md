# HTML2LaTeX

A **Python 2.7** library to convert HTML (generated by rich text editors like TinyMCE/CKEditor) into LaTeX markup. Originally developed between **2014** and **2016** as part of the book, question paper, and personalized workbook publishing workflow at [ClassKlap](https://www.classklap.com/).

> **Note**: This code has not been significantly changed or modernized since 2016. It is written for **Python 2.7** and includes custom logic tightly coupled with our in-house requirements. Future versions will aim to **modernize** and make the converter more generic.

## Table of Contents

1. [Background](#background)
2. [Screenshots](#screenshots)
3. [Features & Caveats](#features--caveats)
4. [Requirements](#requirements)
5. [Quick Start](#quick-start)
6. [Usage](#usage)
7. [Future Plans](#future-plans)
8. [License](#license)

---

## Background

At [ClassKlap](https://www.classklap.com/), we develop personalized learning solutions and offline assessment materials for schools across India. Our content teams authored study materials in a web-based rich text editor (e.g., TinyMCE). We needed to reliably convert the HTML output of these editors into **LaTeX** to generate PDFs for printing.

**HTML2LaTeX** was built as an internal component in that publishing pipeline. It handles table formatting, math equations (via custom parsing for MathJax-like syntax), image handling, and more—albeit in a very **domain-specific** way.

---

## Screenshots

![Screenshot of the demo app](assets/screenshot.png)

---

## Features & Caveats

- **Features**:
  - Converts basic HTML elements (`<p>`, `<div>`, `<span>`, `<img>`, `<table>`, `<ul>`, `<ol>`, etc.) to LaTeX equivalents.
  - Custom handling of math equations wrapped in `<span class="math-tex">` or similar.
  - Handles table merges, cell spans, image scaling, etc.
  - Rudimentary caching (now delegated to the calling application).
  - Allows some fancy replacements for `ü` → `\checkmark` and other domain-specific behavior.

- **Caveats**:
  1. **Python 2.7** only. Most modern Python environments now run **Python 3**.
  2. Last major code changes were done **in 2016**, so many parts may be outdated or fragile.
  3. **Heavily customized** for the internal needs of ClassKlap. You might see references to ClassKlap’s internal logic, text replacements, or table structures.
  4. Relies on external tools like `phantomjs`/`splinter` for certain table rendering tasks (these tools may be deprecated or unmaintained).
  5. No longer actively maintained in its present form. Use at your own risk or fork and modernize.

---

## Requirements

- **Python 2.7**
- Various Python libraries from `requirements.txt` (e.g. `lxml`, `jinja2`, `splinter`, `redis`, etc.)
- Some system packages:
  - `build-essential`, `libxml2-dev`, `libxslt1-dev` (for `lxml`)
  - `phantomjs` (for advanced table-to-image logic, if needed)

---

## Quick Start

1. **Clone** the repository:

   ```bash
   git clone https://github.com/pankaj28843/html2latex.git
   cd html2latex
   ```

2. **Install dependencies** (in a Python 2.7 virtualenv or environment):

   ```bash
   pip install -r requirements.txt
   ```

3. **Install** HTML2LaTeX (in “editable” mode):

   ```bash
   python setup.py develop
   ```

4. **Run** a simple test:

   ```bash
   python -c "from html2latex import html2latex; print(html2latex('<p>Hello World</p>'))"
   ```

   This should output some LaTeX snippet like `\noindent Hello World \par`.

---

## Usage

In your **Python 2.7** code:

```python
from html2latex.html2latex import html2latex

html_string = """
<p>Hello <b>World</b></p>
<p>This is a test with a math equation: <span class="math-tex">\( x^2 + y^2 = z^2 \)</span></p>
"""

latex_code = html2latex(html_string)
print(latex_code)
```

- If you integrate it into a larger codebase, you can handle caching, logging, or environment variables at the application layer.

---

## Docker & Demo App

We provide a **demo Flask app** (still Python 2.7) that showcases HTML-to-LaTeX conversion, including a small frontend with a rich text editor and a right-pane preview of the converted LaTeX.

1. **Build** and **run** via Docker Compose:

   ```bash
   docker compose build
   docker compose up
   ```

2. Go to <http://127.0.0.1:15005/> to see the demo in action.

---

## Future Plans

- **Python 3 compatibility**: We plan to upgrade the codebase to Python 3, and adopt more modern Python libraries.
- **Modular design**: Reduce the domain-specific logic (like weird text replacements) and make it a more generic HTML-to-LaTeX converter.
- **Comprehensive test suite**: The code has mostly been tested in production (at ClassKlap), but lacks thorough automated tests.
